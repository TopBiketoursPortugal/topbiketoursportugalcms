---
import markdownit from 'markdown-it'; // or your preferred Markdown component
import { tv, type VariantProps } from 'tailwind-variants';
import Prose from '../prose/prose.astro';
import { cn } from 'utils/cn';

export type TextProps = VariantProps<typeof textVariants> & {
  text: string;
  tailwind?: string;
};

type Props = TextProps;

const textVariants = tv({
  base: 'flex flex-col whitespace-normal break-all',
  variants: {
    padding: {
      loose: 'px-6 py-12 md:px-12 md:py-20',
      normal: 'px-4 py-6 md:px-5 md:py-8',
      tight: 'px-2 py-4 md:px-4 md:py-8'
    },
    container: {
      fluid: 'max-w-none',
      normal: 'mx-auto max-w-screen-xl'
    },
    align: {
      leading: 'items-start justify-start',
      trailing: 'items-end justify-end',
      centered: 'items-center justify-center'
    }
  },
  defaultVariants: {
    padding: 'normal',
    container: 'fluid',
    align: 'leading'
  }
});

const {
  text,
  padding = 'normal',
  align = 'leading',
  container = 'fluid',
  tailwind
} = Astro.props;
const md = markdownit({ html: true });
const textHTML = md.render(text);
const style = cn(textVariants({ padding, container, align }), tailwind);
---

<Prose class={style} set:html={textHTML} />
